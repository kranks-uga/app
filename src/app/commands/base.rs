use chrono::Local;

/// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤ UI
pub const CMD_CLEAR_CHAT: &str = "COMMAND_ACTION_CLEAR";

/// –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑–æ–≤—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –≤—Ä–µ–º—è, –¥–∞—Ç–∞, –ø–æ–º–æ—â—å)
pub fn process_basic_command(cmd: &str, assistant_name: &str) -> Option<String> {
    match cmd {
        // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        "–ø—Ä–∏–≤–µ—Ç" | "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π" | "—Ö–∞–π" | "hello" => Some(format!(
            "–ü—Ä–∏–≤–µ—Ç! –Ø {}, —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è Arch Linux.",
            assistant_name
        )),

        // –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Ä–∫–µ—Ä –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤ UI
        "–æ—á–∏—Å—Ç–∏—Ç—å" | "–æ—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç" | "clear" => {
            Some(CMD_CLEAR_CHAT.to_string())
        }

        // –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã
        cmd if cmd.starts_with("—Å–∫–∞–∂–∏ ") => {
            let message = cmd.trim_start_matches("—Å–∫–∞–∂–∏ ").trim();
            if message.is_empty() {
                Some("–ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–∫–∞–∑–∞—Ç—å?".to_string())
            } else {
                Some(message.to_string())
            }
        }

        // –í—Ä–µ–º—è
        "–≤—Ä–µ–º—è" | "–∫–æ—Ç–æ—Ä—ã–π —á–∞—Å" | "time" => Some(format!(
            "–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {}",
            Local::now().format("%H:%M:%S")
        )),

        // –î–∞—Ç–∞
        "–¥–∞—Ç–∞" | "–∫–∞–∫–æ–µ —Å–µ–≥–æ–¥–Ω—è —á–∏—Å–ª–æ" | "date" => {
            Some(format!("–°–µ–≥–æ–¥–Ω—è: {}", Local::now().format("%d.%m.%Y")))
        }

        // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
        "–¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è" => Some(format!(
            "–°–µ–π—á–∞—Å: {}",
            Local::now().format("%d.%m.%Y %H:%M:%S")
        )),

        // –ü–æ–º–æ—â—å
        "–ø–æ–º–æ—â—å" | "help" | "?" => Some(HELP_TEXT.to_string()),

        _ => None,
    }
}

/// –¢–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∫–∏
const HELP_TEXT: &str = "\
üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

‚ñ∏ –ë–∞–∑–æ–≤—ã–µ:
  –≤—Ä–µ–º—è, –¥–∞—Ç–∞, –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è

‚ñ∏ –ü–∞–∫–µ—Ç—ã (—á–µ—Ä–µ–∑ yay):
  –ø–æ–∏—Å–∫ <–∑–∞–ø—Ä–æ—Å>
  —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å <–ø–∞–∫–µ—Ç>
  —É–¥–∞–ª–∏—Ç—å <–ø–∞–∫–µ—Ç>
  –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

‚ñ∏ –°–∏—Å—Ç–µ–º–∞:
  –≤—ã–∫–ª—é—á–∏—Ç—å –ø–∫
  –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å

‚ñ∏ –ì–∞–π–¥—ã:
  –≥–∞–π–¥—ã ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥–∞–π–¥–æ–≤
  –≥–∞–π–¥ <—Ç–µ–º–∞> ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≥–∞–π–¥

‚ñ∏ –ü—Ä–æ—á–µ–µ:
  –æ—á–∏—Å—Ç–∏—Ç—å ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç
  –ø–æ–º–æ—â—å ‚Äî —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞

üí° –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å ‚Äî –ò–ò –ø–æ—Å—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–º–æ—á—å!";
