use chrono::Local;

/// Обработка текстовых запросов (приветствие, время, дата, помощь)
pub fn process_basic_command(cmd: &str, assistant_name: &str) -> Option<String> {
    match cmd {
        // Приветствие с использованием имени ассистента из параметров

        "привет" | "здравствуй" => {
            Some(format!("Привет! Я {}, твой ассистент на Arch Linux.", assistant_name))
        }

        // Заглушка для очистки чата (логика реализуется на уровне UI)

        "очистить" | "очистить чат" => {
            None
        }

        // Повторение фразы: обрезает префикс "скажи " и возвращает остаток текста
        cmd if cmd.starts_with("скажи ") => {
            let message = cmd.trim_start_matches("скажи ").trim();
            if message.is_empty() {
                Some("Что именно сказать?".to_string())
            } else {
                Some(message.to_string())
            }
        }

        // Вывод текущего времени в формате ЧЧ:ММ:СС

        "время" | "который час" => {
            let now = Local::now();
            Some(format!("Текущее время: {}", now.format("%H:%M:%S")))
        }

        // Вывод текущей даты в формате ДД.ММ.ГГГГ

        "дата" | "какое сегодня число" => {
            let now = Local::now();
            Some(format!("Сегодня: {}", now.format("%d.%m.%Y")))
        }

        // Комбинированный вывод даты и времени
        "дата и время" => {
            let now = Local::now();
            Some(format!("Текущие дата и время: {}", now.format("%d.%m.%Y %H:%M:%S")))
        }

        // Список доступных инструкций для пользователя
        "помощь" => Some(format!("Основные команды:\n1)время\n2)дата\n3)дата и время\nСистемные команды:\n1)выключить пк")),

        // Если команда не распознана
        _ => None,
    }
}
